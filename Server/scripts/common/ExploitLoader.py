# -*- coding:utf-8 -*-

from KBEDebug import *



class ExploitLoader:
	_instance = None
	
	def __init__( self ):
		assert ExploitLoader._instance is None
		self._ExploitDatas = {}
		
	@staticmethod
	def instance():
		if ExploitLoader._instance is None:
			ExploitLoader._instance = ExploitLoader()
		return ExploitLoader._instance
		
	def init( self, ConfigDatas):
		for level, exploitData in ConfigDatas.items():
			tempDict = {}
			for key, value in exploitData.items():
				tempDict[key] = value
			self._ExploitDatas[int(level)] = tempDict
			
	def getRoleMilitaryRank( self, player ):
		"""
		获取玩家对应的军衔
		"""
		for Level, ExploitData in self._ExploitDatas.items():
			if player.getExploit() < ExploitData["exploit"]:
				return max( 1, Level - 1 )
		return len(self._ExploitDatas)


	def getRoleExploitData( self, level ):
		"""
		获得军功数据
		"""
		return self._ExploitDatas.get(level,None)


g_exploitMgr = ExploitLoader.instance()
